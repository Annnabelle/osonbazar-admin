"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[646],{7627:(e,r,l)=>{l.d(r,{Mv:()=>n,Pe:()=>a,QL:()=>o,Tb:()=>d,e6:()=>t,ll:()=>i,rY:()=>s});var c=l(7822);const t=()=>async e=>{try{e({type:"get_popular_products",payload:await c.A.getPopularProducts()})}catch(r){console.log(r)}},a=e=>async r=>{try{r({type:"get_market_products",payload:await c.A.getMarketProducts(e)})}catch(l){console.log(l)}},i=e=>async r=>{try{r({type:"get_stream_products",payload:await c.A.getStreamProducts(e)})}catch(l){console.log(l)}},o=async e=>{try{return await c.A.createReferralLink(e)}catch(r){console.log(r)}},s=async e=>{try{return await c.A.deleteReferralLink(e)}catch(r){console.log(r)}},n=async(e,r)=>{try{return await c.A.editReferralLink(e,r)}catch(l){console.log(l)}},d=async e=>{try{return await c.A.detailReferralLink(e)}catch(r){console.log(r)}}},9646:(e,r,l)=>{l.r(r),l.d(r,{default:()=>y});var c=l(5043),t=l(9456),a=l(3216),i=l(5475),o=l(7627),s=l(6145),n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"],d=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M496,496H448.771L379.249,368H40a24.028,24.028,0,0,1-24-24V40A24.028,24.028,0,0,1,40,16H472a24.028,24.028,0,0,1,24,24ZM48,336H398.284L464,456.993V48H48Z' class='ci-primary'/>"],u=l(9996),h=l(2145),p=l(3946),m=l(579);const v=e=>{var r;let{card:l,onClick:c}=e;const a=(0,t.wA)();return(0,m.jsxs)("div",{className:"stream-card border position-relative p-2",children:[(0,m.jsx)("div",{className:"position-absolute top-0 end-0 p-2 bg-success text-white",children:null===l||void 0===l?void 0:l.order_count}),(0,m.jsxs)("div",{className:"d-flex gap-2",children:[(0,m.jsx)("img",{src:null===l||void 0===l||null===(r=l.product)||void 0===r?void 0:r.front_image,style:{width:"80px",height:"80px",objectFit:"cover"},alt:""}),(0,m.jsxs)("div",{className:"stream-block",children:[(0,m.jsx)("div",{className:"fw-bold mb-2",style:{fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:null===l||void 0===l?void 0:l.title}),(0,m.jsx)("div",{className:"border px-2 py-1",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:null===l||void 0===l?void 0:l.url})]})]}),(0,m.jsxs)("div",{className:"row w-100 m-0 border-bottom mt-2",children:[(0,m.jsx)(p.jl,{content:"o`chirish",children:(0,m.jsxs)("div",{className:"col-4 d-flex align-items-center gap-2 py-2",style:{color:"#ff3333",cursor:"pointer"},onClick:async()=>{await(0,o.rY)(null===l||void 0===l?void 0:l.id).then((e=>{let{data:r}=e;h.oR.success("O`chirildi"),a((0,o.ll)())})).catch((e=>{let{response:r}=e;if(null!==r&&void 0!==r&&r.data)for(const[l,c]of Object.entries(null===r||void 0===r?void 0:r.data))h.oR.error("".concat(l,": ").concat(c))}))},children:[(0,m.jsx)(s.A,{icon:n,style:{color:"#ff3333"}})," O`chir"]})}),(0,m.jsx)(p.jl,{content:"statistika",children:(0,m.jsxs)("div",{className:"col-4 d-flex align-items-center gap-2 border-start border-end py-2",style:{color:"#ffb020",cursor:"pointer"},onClick:c,children:[(0,m.jsx)(s.A,{icon:d,style:{color:"#ffb020"}}),"O`zgartir"]})}),(0,m.jsx)(p.jl,{content:"nusxa olish",children:(0,m.jsxs)("div",{className:"col-4 d-flex align-items-center gap-2 py-2 text-success",style:{color:"green",cursor:"pointer"},onClick:()=>{const e=document.createElement("textarea");e.innerText=null===l||void 0===l?void 0:l.url,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),h.oR.success("Nusxa olindi")},children:[(0,m.jsx)(s.A,{icon:u.k,className:"text-success"}),"Nusxalash"]})})]})]})},x=e=>{let{show:r,handleClose:l,data:a}=e;const i=(0,t.wA)(),[n,d]=(0,c.useState)(""),v=(0,c.useMemo)((()=>a),[a]),[x,y]=(0,c.useState)({title:"",is_province_required:!0}),f=()=>{l(),d("")};return(0,c.useEffect)((()=>{(async()=>{r&&await(0,o.Tb)(v).then((e=>{let{data:r}=e;y((e=>({...e,title:null===r||void 0===r?void 0:r.title,is_province_required:null===r||void 0===r?void 0:r.is_province_required})))})).catch((e=>console.log(e)))})()}),[a,r]),(0,m.jsx)("div",{children:(0,m.jsxs)(p.zS,{visible:r,onClose:f,children:[(0,m.jsx)(p.E4,{onClose:f,children:(0,m.jsx)(p.lb,{children:"Oqim o`zgartirish"})}),(0,m.jsx)(p.Tc,{children:n?(0,m.jsxs)("div",{className:"p-2 rounded border d-flex align-items-center gap-2",children:[(0,m.jsx)("input",{id:"copyInput",className:"form-control",value:n,readOnly:!0}),(0,m.jsx)(p.Q_,{onClick:()=>{document.getElementById("copyInput").select(),document.execCommand("copy"),h.oR.success("Nusxa olindi")},className:"ms-auto text-white",color:"success",children:(0,m.jsx)(s.A,{icon:u.k})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{onChange:e=>y((r=>({...r,title:e.target.value}))),value:x.title,type:"text",className:"form-control mb-2",placeholder:"Oqim nomini kiriting"}),(0,m.jsx)(p.CK,{onChange:e=>y((r=>({...r,is_province_required:e.target.checked}))),checked:x.is_province_required,id:"flexCheckChecked",label:"Viloyatlar tanlashni sozlash"})]})}),(0,m.jsxs)(p.If,{children:[(0,m.jsx)(p.Q_,{color:"secondary",onClick:f,children:"Yopish"}),!n&&(0,m.jsx)(p.Q_,{color:"primary",onClick:async()=>{await(0,o.Mv)(v,x).then((e=>{let{data:r}=e;d(r.url),i((0,o.ll)())})).catch((e=>{let{response:r}=e;if(null!==r&&void 0!==r&&r.data)for(const[l,c]of Object.entries(null===r||void 0===r?void 0:r.data))h.oR.error("".concat(l,": ").concat(c))}))},children:"Saqlash"})]})]})})},y=()=>{var e;const r=(0,t.wA)(),l=(0,a.zy)(),s=new URLSearchParams(l.search),n=s.get("offset")||0,d=s.get("limit")||25,u=(0,t.d4)((e=>{var r;return null===(r=e.product.streamProducts)||void 0===r?void 0:r.data}));let h=Math.ceil(+(null===u||void 0===u?void 0:u.count)/+d);const[p,y]=(0,c.useState)(!1),[f,j]=(0,c.useState)(""),[g,w]=(0,c.useState)(!1),[_,C]=(0,c.useState)({limit:d,offset:n});return(0,c.useEffect)((()=>{r((0,o.ll)({offset:n,limit:d}))}),[n]),(0,m.jsx)("div",{children:(0,m.jsx)("div",{className:"card",children:(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsx)("div",{className:"fs-4 fw-bold mb-3",children:"Mavjud oqimlar"}),(0,m.jsx)("div",{className:"stream-cards",children:null===u||void 0===u||null===(e=u.results)||void 0===e?void 0:e.map(((e,r)=>(0,m.jsx)(v,{onClick:()=>{j(e.id),w(!0)},card:e},r)))}),(0,m.jsx)(x,{show:g,handleClose:()=>{w(!1)},data:f}),0!==(null===u||void 0===u?void 0:u.count)&&(0,m.jsx)("nav",{"aria-label":"Page navigation example",children:(0,m.jsx)("ul",{className:"pagination justify-content-center mt-4",children:h>0&&[...Array(h)].map(((e,r)=>(0,m.jsx)("li",{className:"page-item",children:(0,m.jsx)(i.N_,{className:"page-link",to:"?offset=".concat(25*r),children:r+1})},r)))})})]})})})}},9996:(e,r,l)=>{l.d(r,{k:()=>c});var c=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='408 432 376 432 376 464 112 464 112 136 144 136 144 104 80 104 80 496 408 496 408 432' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M176,16V400H496V153.373L358.627,16ZM464,368H208V48H312V200H464Zm0-200H344V48h1.372L464,166.627Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=646.ed0cc17c.chunk.js.map