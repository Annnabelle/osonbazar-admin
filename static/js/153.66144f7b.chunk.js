"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[153],{8402:(e,a,t)=>{function l(e){var a,t;return e?null===(a=Intl)||void 0===a||null===(t=a.NumberFormat("uz"))||void 0===t?void 0:t.format(Math.ceil(+e)):"0"}t.d(a,{q:()=>l})},7627:(e,a,t)=>{t.d(a,{Mv:()=>n,Pe:()=>c,QL:()=>r,Tb:()=>d,e6:()=>s,ll:()=>i,rY:()=>o});var l=t(7822);const s=()=>async e=>{try{e({type:"get_popular_products",payload:await l.A.getPopularProducts()})}catch(a){console.log(a)}},c=e=>async a=>{try{a({type:"get_market_products",payload:await l.A.getMarketProducts(e)})}catch(t){console.log(t)}},i=e=>async a=>{try{a({type:"get_stream_products",payload:await l.A.getStreamProducts(e)})}catch(t){console.log(t)}},r=async e=>{try{return await l.A.createReferralLink(e)}catch(a){console.log(a)}},o=async e=>{try{return await l.A.deleteReferralLink(e)}catch(a){console.log(a)}},n=async(e,a)=>{try{return await l.A.editReferralLink(e,a)}catch(t){console.log(t)}},d=async e=>{try{return await l.A.detailReferralLink(e)}catch(a){console.log(a)}}},3534:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var l=t(5043),s=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M479.6,399.716l-81.084-81.084-62.368-25.767A175.014,175.014,0,0,0,368,192c0-97.047-78.953-176-176-176S16,94.953,16,192,94.953,368,192,368a175.034,175.034,0,0,0,101.619-32.377l25.7,62.2L400.4,478.911a56,56,0,1,0,79.2-79.195ZM48,192c0-79.4,64.6-144,144-144s144,64.6,144,144S271.4,336,192,336,48,271.4,48,192ZM456.971,456.284a24.028,24.028,0,0,1-33.942,0l-76.572-76.572-23.894-57.835L380.4,345.771l76.573,76.572A24.028,24.028,0,0,1,456.971,456.284Z' class='ci-primary'/>"],c=t(6145),i=t(8402),r=t(579);const o=e=>{let{card:a,onClick:t}=e;return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("img",{src:null===a||void 0===a?void 0:a.front_image,className:"card-img-top",style:{height:"180px",objectFit:"cover"},alt:""}),(0,r.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,r.jsxs)("div",{className:"fs-7 fw-bold",children:["id: ",null===a||void 0===a?void 0:a.id]}),(0,r.jsx)("h5",{className:"card-title fs-5 mb-1",style:{textOverflow:"ellipsis",overflow:"hidden",WebkitLineClamp:1,WebkitBoxOrient:"vertical",display:"-webkit-box"},children:null===a||void 0===a?void 0:a.title_en}),(0,r.jsxs)("div",{className:"d-flex align-items-center gap-2 fw-bold",children:["Narxi: ",(0,i.q)(null===a||void 0===a?void 0:a.price)," so`m"]}),(0,r.jsxs)("div",{className:"d-flex align-items-center gap-2 fw-bold",children:["Foyda: ",(0,i.q)(null===a||void 0===a?void 0:a.admin_commision)," so`m"]}),(0,r.jsxs)("div",{className:"d-flex align-items-center gap-2 fw-bold",children:["Skladda: ",null===a||void 0===a?void 0:a.product_count]}),(0,r.jsx)("div",{className:"mt-auto",children:(0,r.jsx)("button",{className:"btn btn-success w-100 text-white mt-3",onClick:t,children:"+ Yaratish"})})]})]})};var n=t(9456),d=t(9996),u=t(3946),m=t(2145),h=t(7627);const p=e=>{let{show:a,handleClose:t,data:s}=e;const[i,o]=(0,l.useState)(""),n=(0,l.useMemo)((()=>s),[s]),[p,v]=(0,l.useState)({title:"",product:n,is_province_required:!0}),x=()=>{t(),o("")};return(0,l.useEffect)((()=>{v((e=>({...e,product:s})))}),[s]),(0,r.jsx)("div",{children:(0,r.jsxs)(u.zS,{visible:a,onClose:x,children:[(0,r.jsx)(u.E4,{onClose:x,children:(0,r.jsx)(u.lb,{children:"Oqim yaratish"})}),(0,r.jsx)(u.Tc,{children:i?(0,r.jsxs)("div",{className:"p-2 rounded border d-flex align-items-center gap-2",children:[(0,r.jsx)("input",{id:"copyInput",className:"form-control",value:i,readOnly:!0}),(0,r.jsx)(u.Q_,{onClick:()=>{document.getElementById("copyInput").select(),document.execCommand("copy"),m.oR.success("Nusxa olindi")},className:"ms-auto text-white",color:"success",children:(0,r.jsx)(c.A,{icon:d.k})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{onChange:e=>v((a=>({...a,title:e.target.value}))),value:p.title,type:"text",className:"form-control mb-2",placeholder:"Oqim nomini kiriting"}),(0,r.jsx)(u.CK,{onChange:e=>v((a=>({...a,is_province_required:e.target.checked}))),checked:p.is_province_required,id:"flexCheckChecked",label:"Viloyatlar tanlashni sozlash"})]})}),(0,r.jsxs)(u.If,{children:[(0,r.jsx)(u.Q_,{color:"secondary",onClick:x,children:"Yopish"}),!i&&(0,r.jsx)(u.Q_,{color:"primary",onClick:async()=>{await(0,h.QL)(p).then((e=>{let{data:a}=e;o(a.url)})).catch((e=>{let{response:a}=e;if(null!==a&&void 0!==a&&a.data)for(const[t,l]of Object.entries(null===a||void 0===a?void 0:a.data))m.oR.error("".concat(t,": ").concat(l))}))},children:"Yaratish"})]})]})})};var v=t(3216),x=t(5475);const f=()=>{var e;const a=(0,n.wA)(),t=(0,v.Zp)(),i=(0,v.zy)(),d=new URLSearchParams(i.search),u=d.get("offset")||0,m=d.get("search")||"",f=d.get("limit")||25,y=(0,n.d4)((e=>{var a;return null===(a=e.product.marketProducts)||void 0===a?void 0:a.data}));let g=Math.ceil(+(null===y||void 0===y?void 0:y.count)/+f);const[j,b]=(0,l.useState)(!1),[_,k]=(0,l.useState)(!1),[N,w]=(0,l.useState)(""),[C,A]=(0,l.useState)(m);return(0,l.useEffect)((()=>{a((0,h.Pe)({search:m,offset:u,limit:f}))}),[u]),(0,l.useEffect)((()=>{a((0,h.Pe)({search:m,offset:0,limit:f}))}),[m]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("div",{className:"fw-bold fs-4 mb-3",children:"Mahsulotlar"}),(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("input",{onChange:e=>A(e.target.value),value:C,type:"text",className:"form-control",placeholder:"Mahsulot qidirish"}),(0,r.jsx)("button",{onClick:()=>{t("?search=".concat(C))},className:"btn btn-success input-group-text",id:"basic-addon1",children:(0,r.jsx)(c.A,{icon:s,style:{color:"#fff"}})})]})]}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("div",{className:"market-cards",children:null===y||void 0===y||null===(e=y.results)||void 0===e?void 0:e.map(((e,a)=>(0,r.jsx)(o,{card:e,onClick:()=>{w(e.id),k(!0)}},a)))}),(0,r.jsx)(p,{show:_,handleClose:()=>{k(!1)},data:N}),(0,r.jsx)("nav",{"aria-label":"Page navigation example",children:(0,r.jsx)("ul",{className:"pagination justify-content-center mt-4",children:g>0&&[...Array(g)].map(((e,a)=>(0,r.jsx)("li",{className:"page-item",children:(0,r.jsx)(x.N_,{className:"page-link",to:"?search=".concat(m,"&offset=").concat(25*a,"&limit=25"),children:a+1})},a)))})})]})]})})}},9996:(e,a,t)=>{t.d(a,{k:()=>l});var l=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='408 432 376 432 376 464 112 464 112 136 144 136 144 104 80 104 80 496 408 496 408 432' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M176,16V400H496V153.373L358.627,16ZM464,368H208V48H312V200H464Zm0-200H344V48h1.372L464,166.627Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=153.66144f7b.chunk.js.map